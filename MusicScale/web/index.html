<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="css/abcjs-audio.css" rel="stylesheet" type="text/css">
  <title>Music Sheet Area</title>
</head>
<body>
  <h1 id="title">자바스크립트 동작안함</h1>
  <div id="notation"></div>
  <div id="audio"></div>
  <script src="./js/abcjs-basic-min.js"></script>
  <script>
    const is_iOS = navigator.userAgent.match(/iPhone|iPad|iPod/i) == null ? false : true

    function onRender(tune, params = {responsive: 'resize'}) {
      alert(tune)
      const rendered = ABCJS.renderAbc('notation', tune, params)
      onMidi(rendered)
    }

    function onMidi(rendered) {
      if (ABCJS.synth.supportsAudio()) {
        const visualObj = rendered[0]
        const synthControl = new ABCJS.synth.SynthController()
        synthControl.load("#audio", null, { displayRestart: true, displayPlay: true, displayProgress: true })
        synthControl.setTune(visualObj, false)
      } else {
        document.querySelector("#audio").innerHTML = "<div class='audio-error'>Audio is not supported in this browser.</div>";
      }
    }

    console.log('====== start ======')
    document.getElementById('title').textContent = '자바스크립트 동작함'
    
  </script>
</body>
</html>